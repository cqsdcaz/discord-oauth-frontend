// Add this to your index.html script
function checkSavedUser() {
    const savedUser = localStorage.getItem('discord_user');
    const authTime = localStorage.getItem('discord_auth_time');
    
    if (savedUser && authTime) {
        const user = JSON.parse(savedUser);
        const loginTime = new Date(authTime);
        const now = new Date();
        const hoursSinceLogin = (now - loginTime) / (1000 * 60 * 60);
        
        // Auto-logout after 24 hours
        if (hoursSinceLogin < 24) {
            displayUserInfo(user);
        } else {
            localStorage.removeItem('discord_user');
            localStorage.removeItem('discord_auth_time');
        }
    }
}

function displayUserInfo(user) {
    const result = document.getElementById('result');
    result.style.display = 'block';
    result.className = 'success';
    result.innerHTML = `
        <h3>Welcome back, ${user.username}! âœ…</h3>
        <p>You're already logged in.</p>
        <p>Email: ${user.email}</p>
        <p>User ID: ${user.id}</p>
        <button onclick="logout()">Logout</button>
    `;
}

function logout() {
    localStorage.removeItem('discord_user');
    localStorage.removeItem('discord_auth_time');
    sessionStorage.removeItem('current_discord_user');
    location.reload();
}

// Check for saved user on page load
window.addEventListener('load', checkSavedUser);
